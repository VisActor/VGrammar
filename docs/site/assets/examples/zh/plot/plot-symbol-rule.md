---
category: examples
group: plot
title: 点、线组合图
order: 120-4
cover: /vgrammar/preview/plot-plot-symbol-rule_0.7.6.png
---

# 点、线组合图

数据和图表引用自[observable](https://observablehq.com/@observablehq/plot-dot-plot?intent=fork)

## 代码演示

```javascript livedemo template=vgrammar
const data = [
  {
    name: 'AL',
    '<10': '598478',
    '10-19': '638789',
    '20-29': '661666',
    '30-39': '603013',
    '40-49': '625599',
    '50-59': '673864',
    '60-69': '548376',
    '70-79': '316598',
    '> 80': '174781'
  },
  {
    name: 'AK',
    '<10': '106741',
    '10-19': '99926',
    '20-29': '120674',
    '30-39': '102008',
    '40-49': '91539',
    '50-59': '104569',
    '60-69': '70473',
    '70-79': '28422',
    '> 80': '12503'
  },
  {
    name: 'AZ',
    '<10': '892083',
    '10-19': '912735',
    '20-29': '939804',
    '30-39': '857054',
    '40-49': '833290',
    '50-59': '834858',
    '60-69': '737884',
    '70-79': '466153',
    '> 80': '254716'
  },
  {
    name: 'AR',
    '<10': '392177',
    '10-19': '397185',
    '20-29': '399698',
    '30-39': '372998',
    '40-49': '370157',
    '50-59': '395070',
    '60-69': '329734',
    '70-79': '197985',
    '> 80': '113468'
  },
  {
    name: 'CA',
    '<10': '5038433',
    '10-19': '5170341',
    '20-29': '5809455',
    '30-39': '5354112',
    '40-49': '5179258',
    '50-59': '5042094',
    '60-69': '3737461',
    '70-79': '2011678',
    '> 80': '1311374'
  },
  {
    name: 'CO',
    '<10': '690830',
    '10-19': '697447',
    '20-29': '780508',
    '30-39': '766382',
    '40-49': '705450',
    '50-59': '725661',
    '60-69': '563376',
    '70-79': '274466',
    '> 80': '155175'
  },
  {
    name: 'CT',
    '<10': '399369',
    '10-19': '481065',
    '20-29': '462323',
    '30-39': '424890',
    '40-49': '496265',
    '50-59': '546361',
    '60-69': '400995',
    '70-79': '217827',
    '> 80': '159475'
  },
  {
    name: 'DE',
    '<10': '112177',
    '10-19': '117854',
    '20-29': '127554',
    '30-39': '114063',
    '40-49': '117588',
    '50-59': '133331',
    '60-69': '110822',
    '70-79': '65369',
    '> 80': '35937'
  },
  {
    name: 'DC',
    '<10': '74377',
    '10-19': '62783',
    '20-29': '136976',
    '30-39': '121520',
    '40-49': '80570',
    '50-59': '74779',
    '60-69': '56984',
    '70-79': '31362',
    '> 80': '19658'
  },
  {
    name: 'FL',
    '<10': '2211012',
    '10-19': '2331102',
    '20-29': '2597830',
    '30-39': '2416176',
    '40-49': '2575576',
    '50-59': '2762983',
    '60-69': '2404659',
    '70-79': '1615547',
    '> 80': '1019566'
  },
  {
    name: 'GA',
    '<10': '1363631',
    '10-19': '1421557',
    '20-29': '1418696',
    '30-39': '1357210',
    '40-49': '1404698',
    '50-59': '1337985',
    '60-69': '998253',
    '70-79': '528108',
    '> 80': '269182'
  },
  {
    name: 'HI',
    '<10': '176484',
    '10-19': '163559',
    '20-29': '204336',
    '30-39': '187590',
    '40-49': '176904',
    '50-59': '188438',
    '60-69': '164957',
    '70-79': '85345',
    '> 80': '66060'
  },
  {
    name: 'ID',
    '<10': '236658',
    '10-19': '239509',
    '20-29': '218684',
    '30-39': '209500',
    '40-49': '194678',
    '50-59': '205170',
    '60-69': '179429',
    '70-79': '97621',
    '> 80': '54234'
  },
  {
    name: 'IL',
    '<10': '1619682',
    '10-19': '1715984',
    '20-29': '1789739',
    '30-39': '1721954',
    '40-49': '1697069',
    '50-59': '1773366',
    '60-69': '1326121',
    '70-79': '728821',
    '> 80': '478948'
  },
  {
    name: 'IN',
    '<10': '863029',
    '10-19': '905594',
    '20-29': '905590',
    '30-39': '827086',
    '40-49': '844059',
    '50-59': '911778',
    '60-69': '704523',
    '70-79': '384788',
    '> 80': '243131'
  },
  {
    name: 'IA',
    '<10': '401712',
    '10-19': '418667',
    '20-29': '419456',
    '30-39': '383638',
    '40-49': '370719',
    '50-59': '427554',
    '60-69': '344037',
    '70-79': '197223',
    '> 80': '143583'
  },
  {
    name: 'KS',
    '<10': '401751',
    '10-19': '402092',
    '20-29': '406956',
    '30-39': '368732',
    '40-49': '344427',
    '50-59': '389834',
    '60-69': '300759',
    '70-79': '166104',
    '> 80': '117637'
  },
  {
    name: 'KY',
    '<10': '555615',
    '10-19': '575866',
    '20-29': '593819',
    '30-39': '558201',
    '40-49': '580553',
    '50-59': '623164',
    '60-69': '495736',
    '70-79': '273961',
    '> 80': '155074'
  },
  {
    name: 'LA',
    '<10': '622061',
    '10-19': '613633',
    '20-29': '683606',
    '30-39': '615411',
    '40-49': '571991',
    '50-59': '631936',
    '60-69': '488846',
    '70-79': '266123',
    '> 80': '152063'
  },
  {
    name: 'ME',
    '<10': '137954',
    '10-19': '155774',
    '20-29': '156359',
    '30-39': '147695',
    '40-49': '176908',
    '50-59': '215787',
    '60-69': '179540',
    '70-79': '97899',
    '> 80': '62007'
  },
  {
    name: 'MD',
    '<10': '741952',
    '10-19': '764730',
    '20-29': '815346',
    '30-39': '784097',
    '40-49': '815875',
    '50-59': '862778',
    '60-69': '636309',
    '70-79': '330736',
    '> 80': '208079'
  },
  {
    name: 'MA',
    '<10': '737748',
    '10-19': '862371',
    '20-29': '971340',
    '30-39': '847306',
    '40-49': '916106',
    '50-59': '979128',
    '60-69': '737805',
    '70-79': '401931',
    '> 80': '288408'
  },
  {
    name: 'MI',
    '<10': '1181424',
    '10-19': '1324071',
    '20-29': '1338179',
    '30-39': '1162186',
    '40-49': '1283122',
    '50-59': '1454462',
    '60-69': '1148131',
    '70-79': '619722',
    '> 80': '398303'
  },
  {
    name: 'MN',
    '<10': '711604',
    '10-19': '714399',
    '20-29': '728222',
    '30-39': '715583',
    '40-49': '692201',
    '50-59': '782655',
    '60-69': '577313',
    '70-79': '312906',
    '> 80': '215985'
  },
  {
    name: 'MS',
    '<10': '400288',
    '10-19': '421329',
    '20-29': '414195',
    '30-39': '374724',
    '40-49': '377165',
    '50-59': '400164',
    '60-69': '319443',
    '70-79': '181195',
    '> 80': '100689'
  },
  {
    name: 'MO',
    '<10': '763948',
    '10-19': '792935',
    '20-29': '831725',
    '30-39': '763002',
    '40-49': '750989',
    '50-59': '857534',
    '60-69': '668878',
    '70-79': '388086',
    '> 80': '242554'
  },
  {
    name: 'MT',
    '<10': '126020',
    '10-19': '126294',
    '20-29': '136346',
    '30-39': '125004',
    '40-49': '116502',
    '50-59': '149800',
    '60-69': '130977',
    '70-79': '70528',
    '> 80': '41920'
  },
  {
    name: 'NE',
    '<10': '263518',
    '10-19': '257610',
    '20-29': '260646',
    '30-39': '244236',
    '40-49': '222479',
    '50-59': '250911',
    '60-69': '195705',
    '70-79': '107650',
    '> 80': '78504'
  },
  {
    name: 'NV',
    '<10': '369362',
    '10-19': '360263',
    '20-29': '392834',
    '30-39': '390261',
    '40-49': '387272',
    '50-59': '373757',
    '60-69': '309651',
    '70-79': '173499',
    '> 80': '82273'
  },
  {
    name: 'NH',
    '<10': '138762',
    '10-19': '167495',
    '20-29': '167554',
    '30-39': '151409',
    '40-49': '182703',
    '50-59': '217950',
    '60-69': '164287',
    '70-79': '84791',
    '> 80': '52552'
  },
  {
    name: 'NJ',
    '<10': '1079136',
    '10-19': '1153625',
    '20-29': '1139927',
    '30-39': '1143452',
    '40-49': '1254602',
    '50-59': '1307263',
    '60-69': '946399',
    '70-79': '523620',
    '> 80': '367432'
  },
  {
    name: 'NM',
    '<10': '276468',
    '10-19': '282662',
    '20-29': '289801',
    '30-39': '260579',
    '40-49': '244346',
    '50-59': '280363',
    '60-69': '239044',
    '70-79': '135013',
    '> 80': '74393'
  },
  {
    name: 'NY',
    '<10': '2319945',
    '10-19': '2445591',
    '20-29': '2894266',
    '30-39': '2605355',
    '40-49': '2617327',
    '50-59': '2755620',
    '60-69': '2095207',
    '70-79': '1160055',
    '> 80': '804091'
  },
  {
    name: 'NC',
    '<10': '1250298',
    '10-19': '1310398',
    '20-29': '1350242',
    '30-39': '1268976',
    '40-49': '1357746',
    '50-59': '1356117',
    '60-69': '1095320',
    '70-79': '609234',
    '> 80': '342497'
  },
  {
    name: 'ND',
    '<10': '99477',
    '10-19': '91069',
    '20-29': '124509',
    '30-39': '94713',
    '40-49': '80327',
    '50-59': '98688',
    '60-69': '73825',
    '70-79': '41348',
    '> 80': '32206'
  },
  {
    name: 'OH',
    '<10': '1422838',
    '10-19': '1530264',
    '20-29': '1535538',
    '30-39': '1398724',
    '40-49': '1490959',
    '50-59': '1677794',
    '60-69': '1320776',
    '70-79': '728158',
    '> 80': '481890'
  },
  {
    name: 'OK',
    '<10': '534481',
    '10-19': '522282',
    '20-29': '552528',
    '30-39': '501392',
    '40-49': '469410',
    '50-59': '512850',
    '60-69': '404704',
    '70-79': '239887',
    '> 80': '138055'
  },
  {
    name: 'OR',
    '<10': '474456',
    '10-19': '485345',
    '20-29': '538596',
    '30-39': '537767',
    '40-49': '507826',
    '50-59': '534421',
    '60-69': '490894',
    '70-79': '255809',
    '> 80': '157153'
  },
  {
    name: 'PA',
    '<10': '1458931',
    '10-19': '1608018',
    '20-29': '1712448',
    '30-39': '1520409',
    '40-49': '1645291',
    '50-59': '1881378',
    '60-69': '1491536',
    '70-79': '850897',
    '> 80': '615069'
  },
  {
    name: 'RI',
    '<10': '111377',
    '10-19': '136885',
    '20-29': '153674',
    '30-39': '126503',
    '40-49': '137892',
    '50-59': '156127',
    '60-69': '117653',
    '70-79': '63359',
    '> 80': '51021'
  },
  {
    name: 'SC',
    '<10': '599591',
    '10-19': '619144',
    '20-29': '667523',
    '30-39': '596491',
    '40-49': '619792',
    '50-59': '663408',
    '60-69': '579856',
    '70-79': '322073',
    '> 80': '166727'
  },
  {
    name: 'SD',
    '<10': '120366',
    '10-19': '113383',
    '20-29': '116748',
    '30-39': '105499',
    '40-49': '96288',
    '50-59': '117012',
    '60-69': '92824',
    '70-79': '50398',
    '> 80': '38540'
  },
  {
    name: 'TN',
    '<10': '818404',
    '10-19': '842873',
    '20-29': '895337',
    '30-39': '837313',
    '40-49': '866343',
    '50-59': '904272',
    '60-69': '741045',
    '70-79': '414939',
    '> 80': '227483'
  },
  {
    name: 'TX',
    '<10': '3983091',
    '10-19': '3910528',
    '20-29': '3946447',
    '30-39': '3770534',
    '40-49': '3545746',
    '50-59': '3344930',
    '60-69': '2431494',
    '70-79': '1291486',
    '> 80': '732179'
  },
  {
    name: 'UT',
    '<10': '513515',
    '10-19': '479126',
    '20-29': '465219',
    '30-39': '436010',
    '40-49': '328569',
    '50-59': '301596',
    '60-69': '230007',
    '70-79': '123674',
    '> 80': '70711'
  },
  {
    name: 'VT',
    '<10': '63768',
    '10-19': '79351',
    '20-29': '81765',
    '30-39': '70092',
    '40-49': '79982',
    '50-59': '99521',
    '60-69': '82136',
    '70-79': '42978',
    '> 80': '26656'
  },
  {
    name: 'VA',
    '<10': '1033629',
    '10-19': '1065461',
    '20-29': '1170634',
    '30-39': '1112111',
    '40-49': '1134928',
    '50-59': '1162028',
    '60-69': '881763',
    '70-79': '475141',
    '> 80': '274606'
  },
  {
    name: 'WA',
    '<10': '895790',
    '10-19': '882812',
    '20-29': '1004428',
    '30-39': '970613',
    '40-49': '921205',
    '50-59': '970407',
    '60-69': '784208',
    '70-79': '401094',
    '> 80': '242589'
  },
  {
    name: 'WV',
    '<10': '207017',
    '10-19': '218547',
    '20-29': '232027',
    '30-39': '220494',
    '40-49': '238218',
    '50-59': '269346',
    '60-69': '243108',
    '70-79': '138134',
    '> 80': '79201'
  },
  {
    name: 'WI',
    '<10': '705648',
    '10-19': '755224',
    '20-29': '760961',
    '30-39': '714479',
    '40-49': '732280',
    '50-59': '848672',
    '60-69': '645015',
    '70-79': '350772',
    '> 80': '241747'
  },
  {
    name: 'WY',
    '<10': '78217',
    '10-19': '75535',
    '20-29': '82898',
    '30-39': '76912',
    '40-49': '68464',
    '50-59': '81018',
    '60-69': '67484',
    '70-79': '32819',
    '> 80': '19682'
  },
  {
    name: 'PR',
    '<10': '389428',
    '10-19': '479749',
    '20-29': '480184',
    '30-39': '441842',
    '40-49': '456009',
    '50-59': '452503',
    '60-69': '411924',
    '70-79': '268783',
    '> 80': '148963'
  }
];
const formattedData = data.reduce((res, entry) => {
  const keys = Object.keys(entry).filter(key => key !== 'name');
  const sum = keys.reduce((s, k) => {
    return s + +entry[k];
  }, 0);

  return [
    ...res,
    ...keys.map(k => {
      return {
        name: entry.name,
        value: +entry[k],
        percent: entry[k] / sum,
        group: k
      };
    })
  ];
}, []);
const rangeData = data.map(entry => {
  const keys = Object.keys(entry).filter(key => key !== 'name');
  const sum = keys.reduce((s, k) => {
    return s + +entry[k];
  }, 0);
  const vals = keys.map(k => {
    return +entry[k];
  });

  return { name: entry.name, min: Math.min.apply(null, vals) / sum, max: Math.max.apply(null, vals) / sum };
});

const plot = new Plot({
  autoFit: true,
  container: document.getElementById(CONTAINER_ID),
  hover: true
});

plot
  .ruleY()
  .data(rangeData)
  .encode('y', 'name')
  .encode('x', ['min', 'max'])
  .scale('x', { type: 'linear', zero: true })
  .scale('y', { type: 'band' })
  .style({ stroke: '#666' });
plot
  .text()
  .data(rangeData)
  .encode('x', 'min')
  .encode('y', 'name')
  .encode('text', 'name')
  .style({ fill: '#666', textAlign: 'end', textBaseline: 'middle', dx: -10, fontSize: 12 });
plot
  .symbol()
  .data(formattedData)
  .encode('x', 'percent')
  .encode('y', 'name')
  .encode('group', 'group')
  .encode('color', 'group')
  .axis('x', { tickCount: 5, y: 0, verticalFactor: -1 }, { position: 'top' })
  .axis('y', true)
  .tooltip({
    title: 'name',
    content: [
      {
        key: 'group',
        value: 'percent'
      }
    ],
    disableDimensionTooltip: false,
    dimensionTooltipChannel: 'y'
  });

plot.run();

// 只为了方便控制太调试用，不要拷贝
window.vGrammarView = plot;
```

## 相关教程
